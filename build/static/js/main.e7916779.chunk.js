(this["webpackJsonpinstagram-clone"]=this["webpackJsonpinstagram-clone"]||[]).push([[0],{55:function(e,t,a){},56:function(e,t,a){},57:function(e,t,a){},66:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(2),c=a.n(n),s=a(18),o=a.n(s),i=(a(55),a(48)),r=a(15),l=(a(56),a(95)),u=(a(57),a(23)),p=u.a.initializeApp({apiKey:"AIzaSyDF2_M8Pg7SvhZ5pV8ac22QTpubEI7LV6k",authDomain:"instagram-clone23.firebaseapp.com",projectId:"instagram-clone23",storageBucket:"instagram-clone23.appspot.com",messagingSenderId:"404334927736",appId:"1:404334927736:web:495cf2f25d03df7883b28d",measurementId:"G-1WFXPZLFT0"}).firestore(),d=u.a.auth(),j=u.a.storage(),m=a(5);var b=function(e){var t=e.postId,a=e.user,c=e.username,s=e.caption,o=e.imageUrl,i=Object(n.useState)([]),d=Object(r.a)(i,2),j=d[0],b=d[1],g=Object(n.useState)(""),f=Object(r.a)(g,2),h=f[0],O=f[1];return Object(n.useEffect)((function(){var e;return t&&(e=p.collection("posts").doc(t).collection("comments").orderBy("timestamp","asc").onSnapshot((function(e){b(e.docs.map((function(e){return e.data()})))}))),function(){e()}}),[t]),Object(m.jsxs)("div",{className:"post",children:[Object(m.jsxs)("div",{className:"post_header",children:[Object(m.jsx)(l.a,{className:"post_avatar",alt:c,src:"static/images/avatar/1.jpg"}),Object(m.jsx)("h3",{children:c})]}),Object(m.jsx)("img",{className:"post_image",src:o,alt:""}),Object(m.jsxs)("h4",{className:"post_text",children:[Object(m.jsx)("strong",{children:c})," ",s]}),Object(m.jsx)("div",{className:"post_comments",children:j.map((function(e){return Object(m.jsxs)("p",{children:[Object(m.jsx)("strong",{children:e.username})," ",e.text]})}))}),a&&Object(m.jsxs)("form",{className:"post_commentBox",action:"",children:[Object(m.jsx)("input",{type:"text",className:"post_input",placeholder:"Add a comment..",value:h,onChange:function(e){return O(e.target.value)}}),Object(m.jsx)("button",{disabled:!h,className:"post_button",type:"submit",onClick:function(e){e.preventDefault(),p.collection("posts").doc(t).collection("comments").add({text:h,username:a.displayName,timestamp:u.a.firestore.FieldValue.serverTimestamp()}),O("")},children:"Post"})]})]})},g=a(92),f=a(91),h=a(94),O=a(93);a(66);var x=function(e){var t=e.username,a=Object(n.useState)(null),c=Object(r.a)(a,2),s=c[0],o=c[1],i=Object(n.useState)(null),l=Object(r.a)(i,2),d=(l[0],l[1],Object(n.useState)(0)),b=Object(r.a)(d,2),g=b[0],f=b[1],h=Object(n.useState)(""),x=Object(r.a)(h,2),v=x[0],y=x[1];return Object(m.jsxs)("div",{className:"imageUpload",children:[Object(m.jsx)("progress",{className:"imageupload_progress",value:g,max:"100"}),Object(m.jsx)("input",{placeholder:"Enter a caption",type:"text",onChange:function(e){return y(e.target.value)},value:v}),Object(m.jsx)("input",{type:"file",onChange:function(e){e.target.files[0]&&o(e.target.files[0])}}),Object(m.jsx)(O.a,{onClick:function(){j.ref("images/".concat(s.name)).put(s).on("state_changed",(function(e){var t=Math.round(e.bytesTransferred/e.totalBytes*100);f(t)}),(function(e){console.log(e),alert(e.message)}),(function(){j.ref("images").child(s.name).getDownloadURL().then((function(e){p.collection("posts").add({timestamp:u.a.firestore.FieldValue.serverTimestamp(),caption:v,imageUrl:e,username:t}),f(0),y(""),o(null)}))}))},children:"Upload"})]})},v=a(46);function y(){return{top:"".concat(50,"%"),left:"".concat(50,"%"),transform:"translate(-".concat(50,"%,-").concat(50,"%)")}}var _=Object(f.a)((function(e){return{paper:{position:"absolute",width:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3)}}}));var w=function(){var e=_(),t=c.a.useState(y),a=Object(r.a)(t,1)[0],s=Object(n.useState)([]),o=Object(r.a)(s,2),l=o[0],u=o[1],j=Object(n.useState)(""),f=Object(r.a)(j,2),w=f[0],N=f[1],S=Object(n.useState)(""),C=Object(r.a)(S,2),I=C[0],k=C[1],A=Object(n.useState)(""),E=Object(r.a)(A,2),U=E[0],B=E[1],L=Object(n.useState)(""),P=Object(r.a)(L,2),D=P[0],F=P[1],T=Object(n.useState)(null),V=Object(r.a)(T,2),W=V[0],M=V[1],R=Object(n.useState)(!1),z=Object(r.a)(R,2),G=z[0],J=z[1];return Object(n.useEffect)((function(){var e=d.onAuthStateChanged((function(e){e?(console.log(e),M(e)):M(null)}));return function(){e()}}),[W,I]),Object(n.useEffect)((function(){p.collection("posts").orderBy("timestamp","desc").onSnapshot((function(e){u(e.docs.map((function(e){return{id:e.id,post:e.data()}})))}))}),[]),Object(m.jsxs)("div",{className:"app",children:[Object(m.jsx)(g.a,{open:w,onClose:function(){N(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(m.jsx)("div",{style:a,className:e.paper,children:Object(m.jsxs)("center",{children:[Object(m.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),Object(m.jsxs)("form",{className:"app_signup",children:[Object(m.jsx)(h.a,{placeholder:"username",type:"text",value:I,onChange:function(e){return k(e.target.value)}}),Object(m.jsx)(h.a,{placeholder:"email",type:"text",value:D,onChange:function(e){return F(e.target.value)}}),Object(m.jsx)(h.a,{placeholder:"password",type:"password",value:U,onChange:function(e){return B(e.target.value)}}),Object(m.jsx)(O.a,{type:"submit",onClick:function(e){e.preventDefault(),d.createUserWithEmailAndPassword(D,U).then((function(e){return e.user.updateProfile({displayName:I})})).catch((function(e){return alert(e.message)})),N(!1)},children:"Sign Up"})]})]})})}),Object(m.jsx)(g.a,{open:G,onClose:function(){return J(!1)},"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:Object(m.jsx)("div",{style:a,className:e.paper,children:Object(m.jsxs)("center",{children:[Object(m.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:""}),Object(m.jsxs)("form",{className:"app_signup",children:[Object(m.jsx)(h.a,{placeholder:"email",type:"text",value:D,onChange:function(e){return F(e.target.value)}}),Object(m.jsx)(h.a,{placeholder:"password",type:"password",value:U,onChange:function(e){return B(e.target.value)}}),Object(m.jsx)(O.a,{type:"submit",onClick:function(e){e.preventDefault(),d.signInWithEmailAndPassword(D,U).catch((function(e){return alert(e.message)})),J(!1)},children:"Sign In"})]})]})})}),Object(m.jsxs)("div",{className:"app_header",children:[Object(m.jsx)("img",{className:"app_headerImage",src:"https://www.instagram.com/static/images/web/mobile_nav_type_logo.png/735145cfe0a4.png",alt:"asdfd"}),W?Object(m.jsx)(O.a,{onClick:function(){return d.signOut()},children:"Logout"}):Object(m.jsxs)("div",{className:"app_loginContainer",children:[Object(m.jsx)(O.a,{onClick:function(){return J(!0)},children:"Sign In"}),Object(m.jsx)(O.a,{onClick:function(){return N(!0)},children:"Sign Up"})]})]}),Object(m.jsxs)("div",{className:"app_posts",children:[Object(m.jsx)("div",{className:"app_postsLeft",children:l.map((function(e){var t=e.id,a=e.post;return Object(m.jsx)(b,Object(i.a)({user:W,postId:t},a),t)}))}),Object(m.jsx)("div",{className:"app_postsRight",children:Object(m.jsx)(v.a,{url:"https://www.instagram.com/p/B_uf9dmAGPw/",maxWidth:320,hideCaption:!1,containerTagName:"div",protocol:"",injectScript:!0,onLoading:function(){},onSucess:function(){},onAfterRender:function(){},onFailure:function(){}})})]}),(null===W||void 0===W?void 0:W.displayName)?Object(m.jsx)(x,{username:W.displayName}):Object(m.jsx)("h3",{children:"Login first to upload"})]})};o.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(w,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.e7916779.chunk.js.map